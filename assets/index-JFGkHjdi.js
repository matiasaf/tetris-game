(function(){const o=document.createElement("link").relList;if(o&&o.supports&&o.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))r(n);new MutationObserver(n=>{for(const s of n)if(s.type==="childList")for(const a of s.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function i(n){const s={};return n.integrity&&(s.integrity=n.integrity),n.referrerPolicy&&(s.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?s.credentials="include":n.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(n){if(n.ep)return;n.ep=!0;const s=i(n);fetch(n.href,s)}})();const u=document.querySelector("canvas"),l=u.getContext("2d"),d=20,h=14,D=30;u.width=d*h;u.height=d*D;l.scale(d,d);const T="ArrowLeft",v="ArrowRight",x="ArrowDown",K="ArrowUp",c=[[0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0],[1,1,1,1,1,1,1,1,1,0,0,1,1,1]],p={cuadrado:[[1,1],[1,1]],linea1:[[1,1,1,1]],linea2:[[1],[1],[1],[1]],triangulo1:[[0,1,0],[1,1,1]],triangulo2:[[1,0],[1,1],[1,0]],triangulo3:[[1,1,1],[0,1,0]],triangulo4:[[0,1],[1,1],[0,1]],serpiente1:[[1,1,0],[0,1,1]],serpiente2:[[0,1],[1,1],[1,0]],l1:[[1,0],[1,0],[1,1]],l2:[[1,1,1],[1,0,0]],l3:[[1,1],[0,1],[0,1]],l4:[[0,0,1],[1,1,1]]},L=["cuadrado","linea1","serpiente1","triangulo1","l1"],S={cuadrado:"cuadrado",linea1:"linea2",linea2:"linea1",serpiente1:"serpiente2",serpiente2:"serpiente1",triangulo1:"triangulo2",triangulo2:"triangulo3",triangulo3:"triangulo4",triangulo4:"triangulo1",l1:"l2",l2:"l3",l3:"l4",l4:"l1"},g="l1",t={position:{x:5,y:5},shape:{name:g,structure:p[g]}};let y=0,E=0;function A(e=0){const o=e-E;E=e,y+=o,y>1e3&&(t.position.y++,y=0,f(c,t)&&(t.position.y--,O(),P())),Y(),window.requestAnimationFrame(A)}function Y(){l.fillStyle="#000",l.fillRect(0,0,u.width,u.height),c.forEach((e,o)=>{e.forEach((i,r)=>{i===1&&(l.fillStyle="yellow",l.fillRect(r,o,1,1))})}),t.shape.structure.forEach((e,o)=>{e.forEach((i,r)=>{i===1&&(l.fillStyle="red",l.fillRect(r+t.position.x,o+t.position.y,1,1))})})}function w(e){e.position.x++}function R(e){e.position.x--}function B(){t.position.y++}function I(){t.position.y--}document.addEventListener("keydown",e=>{if(e.key===T&&(R(t),f(c,t)&&w(t)),e.key===v&&(w(t),f(c,t)&&R(t)),e.key===x&&(B(),f(c,t)&&(I(),O(),P())),e.key===K){const o=S[t.shape.name];if(t.position.x+p[o][0].length>h)return;t.shape.name=o,t.shape.structure=p[o]}});function f(e,o){const{position:i}=o,{structure:r}=o.shape;return r==null?void 0:r.find((n,s)=>n.find((a,_)=>{var m;return a!==0&&((m=e[s+i.y])==null?void 0:m[_+i.x])!==0}))}function C(e){e.position.x=Math.floor(h/2-2),e.position.y=0}function M(e,o){const i=o[Math.floor(Math.random()*o.length)];e.shape={name:i,structure:p[i]}}function O(){t.shape.structure.forEach((e,o)=>{e.forEach((i,r)=>{i===1&&(c[o+t.position.y][r+t.position.x]=1)})}),C(t),M(t,L),f(c,t)&&(window.alert("Game over my friend!"),c.forEach(e=>e.fill(0)))}function P(){const e=[];c.forEach((o,i)=>{o.every(r=>r===1)&&e.push(i)}),e.forEach(o=>{c.splice(o,1);const i=Array(h).fill(0);c.unshift(i)})}A();
